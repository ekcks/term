<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>레스토랑 등록하기 (관리자)</title>

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
    <link rel="stylesheet" th:href="@{//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css}">
    <!-- <link rel="stylesheet" href="/resources/demos/style.css"> -->
    <script th:src="@{https://code.jquery.com/jquery-1.12.4.js}"></script>
    <script th:src="@{https://code.jquery.com/ui/1.12.1/jquery-ui.js}"></script>


    <script>
        $.datepicker.setDefaults({
            dateFormat: 'yy-mm-dd',
            setDate: 'today',
            prevText: '이전 달',
            nextText: '다음 달',
            monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
            monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
            dayNames: ['일', '월', '화', '수', '목', '금', '토'],
            dayNamesShort: ['일', '월', '화', '수', '목', '금', '토'],
            dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
            showMonthAfterYear: true,
            yearSuffix: '년',
            minDate: '-1D'
        });
        });



        <!--    $( function() {-->
        <!--      var dateFormat = "yy/mm/dd",-->
        <!--      datepicker1 = $( "#datepicker1" )-->
        <!--          .datepicker({-->
        <!--            showMonthAfterYear: true, //연도,달 순서로 지정-->
        <!--            changeMonth: true,//달 변경 지정-->
        <!--            dateFormat:"yy/mm/dd",//날짜 포맷-->
        <!--            dayNamesMin: ["일", "월", "화", "수", "목", "금", "토" ],//요일 이름 지정-->
        <!--            monthNamesShort: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"],//월 이름 지정-->
        <!--            minDate:0 //현 날짜 이전을 선택할 수 없음-->
        <!--          })-->
        <!--          .on( "change", function() {-->
        <!--            datepicker1.datepicker( "option", "minDate", getDate(this) );//종료일의 minDate 지정-->
        <!--          }),-->
        <!--          datepicker2= $( "#datepicker2" ).datepicker({-->
        <!--       showMonthAfterYear: true,-->
        <!--          changeMonth: true,-->
        <!--          dateFormat:"yy/mm/dd",-->
        <!--          dayNamesMin: ["일", "월", "화", "수", "목", "금", "토" ],-->
        <!--          monthNamesShort: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"],-->
        <!--          minDate:'+1D' //내일부터 선택가능-->
        <!--        })-->
        <!--        .on( "change", function() {-->
        <!--            datepicker2.datepicker( "option", "maxDate", getDate(this) );//시작일의 maxDate 지정-->
        <!--        });-->

        <!--      function getDate(element) {-->
        <!--        var date;-->
        <!--        try {-->
        <!--          date = $.datepicker.parseDate( dateFormat, element.value );-->
        <!--          if(element.id == 'datepicker1'){-->
        <!--          date.setDate(date.getDate()+1);//종료일이 시작일부돠 하루 뒤 날짜-->
        <!--          }else{-->
        <!--           date.setDate(date.getDate()-1);//시작일이 종료일보다 하루 앞선 날짜-->
        <!--          }-->
        <!--        } catch( error ) {-->
        <!--          date = null;-->
        <!--        }-->
        <!--        return date;-->
        <!--      }-->
        <!--    } );-->
    </script>
    <script>  $(function () {
        $("#datepicker1, #datepicker2").datepicker({
            dateFormat: 'yy.mm.dd'
        });
    });
    </script>
    <style>
        .field-error{
            color:red;
            font-weight:bold;
        }
    </style>


    <link rel="icon" th:href="@{/images/home.png}">
    <link rel="stylesheet" th:href="@{/css/register.css}">
    <link rel="stylesheet" th:href="@{/css/navBar.css}">

</head>

<body>
<!--<header th:replace="~{fragment/header :: bar}">-->

</header>
<div class="register">
    <h1 class="hR">레스토랑  등록하기</h1>

    <form th:action th:object="${brestRequestDto}" method="post">
        <div class="info">
            <label for="brestName"><b>레스토랑 이름</b></label>
            <input type="text" id="brestName" th:field="*{brestName}">
            <div class="field-error" th:errors="*{brestName}">
            </div>
        </div>

        <div class="info-address">
            <label fdr="address"><b>주소</b></label>
            <div>
                <input type="text" id="address" th:field="*{address}" readonly>
                <input type="button"  onclick="findAddr()" value="주소 검색">
            </div>
            <div class="field-error" th:errors="*{address}">
            </div>
        </div>

        <div class="info">
            <label for="detailAddress"><b>상세주소</b></label>
            <input type="text" id="detailAddress" th:field="*{detailAddress}">
            <div class="field-error" th:errors="*{detailAddress}">
            </div>
        </div>

        <div class="info date">
            <b>예약 가능 날짜</b>
            <div>
                <input type="text" id="datepicker1" name="datepicker1" th:field="*{startDate}">
                <b>~</b>
                <input type="text" id="datepicker2" name="datepicker2" th:field="*{endDate}">
            </div>
        </div>
        <div class="field-error" th:errors="*{startDate}">
        </div>
        <div class="field-error" th:errors="*{endDate}">
        </div>

        <div class="info time">
            <b>예약 가능 시간</b>
            <div>
                <input class="timepicker" type="text" placeholder="시간 체크" th:field="*{startTime}">
                <b>~</b>
                <input class="timepicker "type="text" placeholder="시간 체크" th:field="*{endTime}">
            </div>
        </div>
        <div>
            <div class="field-error" th:errors="*{startTime}">
            </div>
            <div class="field-error" th:errors="*{endTime}">
            </div>
        </div>

        <div class="info max">
            <b>최대 예약 가능 수</b>
            <div>
                <label>일일</label>
                <input type="number" placeholder="수량을 입력하세요." th:field="*{dateAccept}">
            </div>
            <div class="field-error" th:errors="*{dateAccept}">
            </div>
            <div>
                <label>시간 당</label>
                <input type="number" placeholder="수량을 입력하세요." th:field="*{timeAccept}">
            </div>
            <div class="field-error" th:errors="*{timeAccept}">
            </div>
        </div>

        <div class="info kind">
            <b>테이블종류/ 좌석 수</b>
            <div>
                <label for="seat2">2인석</label>
                <input type="number" placeholder="수량을 입력하세요." th:field="*{seat2}" id="seat2">
            </div>
            <div class="field-error" th:errors="*{seat2}">
            </div>
            <div>
                <label for="seat4">4인석</label>
                <input type="number" placeholder="수량을 입력하세요." th:field="*{seat4}" id="seat4">
            </div>
            <div class="field-error" th:errors="*{seat4}">
            </div>
            <div>
                <label for="seat6">6인석</label>
                <input type="number" placeholder="수량을 입력하세요." th:field="*{seat6}" id="seat6">
            </div>
            <div class="field-error" th:errors="*{seat6}">
            </div>
            <div>
                <label for="seat8">8인석</label>
                <input type="number" placeholder="수량을 입력하세요." th:field="*{seat8}" id="seat8">
            </div>
            <div class="field-error" th:errors="*{seat8}">
            </div>
        </div>

        <input type="submit" value="등록하기">
    </form>
</div>
<script>
    $(document).ready(function(){
        $('input.timepicker').timepicker({
            timeFormat: 'HH:mm',
            interval: 60,
            startTime: '00:00',
            dynamic: false,
            dropdown: true,
            scrollbar: true
        });
    });
</script>

<script th:inline="javascript">
    function findAddr(){
        new daum.Postcode({
            oncomplete: function(data) {

                console.log(data);

// 팝업에서 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.
// 도로명 주소의 노출 규칙에 따라 주소를 표시한다.
// 내려오는 변수가 값이 없는 경우엔 공백('')값을 가지므로, 이를 참고하여 분기 한다.
                var roadAddr = data.roadAddress; // 도로명 주소 변수
                var jibunAddr = data.jibunAddress; // 지번 주소 변수
// 우편번호와 주소 정보를 해당 필드에 넣는다.

                if(roadAddr !== ''){
                    document.getElementById("address").value = roadAddr;
                }
                else if(jibunAddr !== ''){
                    document.getElementById("address").value = jibunAddr;
                }
            }
        }).open();
    }
</script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>
</body>
</html>